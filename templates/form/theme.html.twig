{% extends 'form_div_layout.html.twig' %}

{# Modern contact form theme based on your new project design #}

{# Generic row wrapper #}
{% block form_row %}
    {% set colClass = {
        'full': 'col-12',
        'half': 'col-12 col-xl-6',
        'third': 'col-12 col-xl-4'
    }[form.vars.attr.width|default('full')] %}

    <div class="{{ colClass }}">
        {{ form_label(form, null, { label_attr: { class: 'visually-hidden' } }) }}
        {{ form_widget(form) }}
        {{ form_errors(form) }}
    </div>
{% endblock %}

{# Buttons #}
{% block button_row %}
    <div>
        {{ form_widget(form) }}
    </div>
{% endblock %}

{# Text inputs (text, email, date, time, etc.) #}
{% block text_widget %}
    {% if form.vars.label == 'time' %}
        <div class="contact__field contact__field--icon">
            <i class="bi bi-clock contact__icon" aria-hidden="true"></i>
            <input
                type="time"
                class="contact__input contact__input--icon"
                placeholder="{{ form.vars.label|striptags }}"
                {{ block('widget_attributes') }}
                value="{{ form.vars.value }}"
            />
        </div>
    {% elseif form.vars.label == 'date' %}
        <div class="contact__field contact__field--icon">
            <i class="bi bi-calendar-event contact__icon" aria-hidden="true"></i>
            <input
                type="date"
                class="contact__input contact__input--icon"
                placeholder="{{ form.vars.label|striptags }}"
                {{ block('widget_attributes') }}
                value="{{ form.vars.value }}"
            />
        </div>
    {% else %}
        <input
            type="text"
            class="contact__input"
            placeholder="{{ form.vars.label|striptags }}"
            {{ block('widget_attributes') }}
            value="{{ form.vars.value }}"
        />
    {% endif %}
{% endblock %}

{% block email_widget %}
    <input
        type="email"
        class="contact__input"
        placeholder="{{ form.vars.label|striptags }}"
        {{ block('widget_attributes') }}
        value="{{ value }}"
    />
{% endblock %}

{# {% block date_widget %}
    <div class="contact__field contact__field--icon">
        <i class="bi bi-calendar-event contact__icon" aria-hidden="true"></i>
        <input
            type="date"
            class="contact__input contact__input--icon"
            placeholder="{{ form.vars.label|striptags }}"
            {{ block('widget_attributes') }}
            {% if form.vars.value is not null and form.vars.value is not iterable %}
                value="{{ form.vars.value|date('Y-m-d') }}"
            {% endif %}
        />
    </div>
{% endblock %} #}


{# {% block time_widget %}
    <div class="contact__field contact__field--icon">
        <i class="bi bi-clock contact__icon" aria-hidden="true"></i>
        <input
            type="time"
            class="contact__input contact__input--icon"
            placeholder="{{ form.vars.label|striptags }}"
            {{ block('widget_attributes') }}
            value="{% if form.vars.value is iterable %}
                       {{ '' }}
                   {% elseif form.vars.value %}
                       {{ form.vars.value|date('H:i') }}
                   {% else %}
                       ''
                   {% endif %}"
        />
    </div>
{% endblock %} #}

{% block textarea_widget %}
    <textarea
        rows="5"
        class="contact__textarea"
        placeholder="{{ form.vars.label|striptags }}"
        {{ block('widget_attributes') }}
    >{{ value }}</textarea>
{% endblock %}

{# Checkbox (if present in Sulu form) #}
{% block checkbox_widget %}
    <div class="form-check">
        <input type="checkbox" class="form-check-input" {{ block('widget_attributes') }} />
        <label class="form-check-label visually-hidden" for="{{ id }}">{{ form.vars.label }}</label>
    </div>
{% endblock %}

{# Select dropdown (choice field) #}
{% block choice_widget %}
    <div class="contact__field contact__field--icon">
        <i class="bi bi-chevron-down contact__icon" aria-hidden="true"></i>
        <select id="{{ id }}" name="{{ full_name }}" class="contact__input contact__input--icon">
            {% if placeholder is defined and placeholder %}
                <option value="" disabled {% if value is empty %}selected{% endif %}>{{ placeholder }}</option>
            {% endif %}
            {% for choice in choices %}
                <option value="{{ choice.value }}" {% if choice.value == value %}selected{% endif %}>{{ choice.label }}</option>
            {% endfor %}
        </select>
    </div>
{% endblock %}

{# Submit button #}
{% block button_widget %}
    <button type="{{ type|default('submit') }}" class="contact__submit">
        {{ label|default('Send Message') }}
    </button>
{% endblock %}
